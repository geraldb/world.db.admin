

<h3><%= @countries.count %> Countries / <%= City.count %> Cities</h3>



<p>
  View: <%= link_to 'A-Z', countries_path( :order => 'title' )  %>
          &bull;
        <%= link_to 'Population', countries_path( :order => 'pop' ) %>
          &bull;
        <%= link_to 'Area (in km²)', countries_path( :order => 'area' ) %>
</p>


<table>
<% @countries.each do |country| %>
  <tr>
    <td class='country-key'  style='vertical-align: baseline;'>
      <%= country.key %>
    </td>
    <td style='vertical-align: baseline;'>
      <%= image_tag "flags/24x24/#{country.key}.png" %>
    </td>
    <td style='vertical-align: baseline;'>
      <span style='white-space: nowrap;'>
<%= link_to country.title, country_path( country ) %>
      (<%= country.code %>)
      </span>
      <br>
    <span class='tags'>
      <% country.tags.each_with_index do |tag,index| %>
           <%= '•' if index > 0 %>
          <%= link_to tag.key, tag_path(tag) %>
      <% end %><!-- each tag -->
    </span>
    </td>
    <td style='white-space: nowrap; vertical-align: baseline;'>
      <%= number_to_human( country.pop ) %>
    </td>
    <td style='white-space: nowrap; vertical-align: baseline;'>
      <%= number_to_human( country.area ) %>
    </td>
    
    <td  style='vertical-align: baseline; text-align: right;'>
<span class='city-count'>
(<%= country.cities.count %>)
</span>
    </td>
    <td style='vertical-align: baseline;'>
  <% country.cities.each_with_index do |city,index| %>
    <%= '•' if index > 0 %>
    <%= city.title %>
  <% end %> <!-- each city -->
    </td>
  </tr>
      
<% end %><!-- each country -->
</table>
